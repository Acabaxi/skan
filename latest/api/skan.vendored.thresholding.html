

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>skan.vendored.thresholding: Thresholding algorithms &mdash; Skan 0.8.0-dev documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Skan 0.8.0-dev documentation" href="../index.html"/>
        <link rel="up" title="Skan API Reference" href="api.html"/>
        <link rel="next" title="skan.nx: NetworkX respresentation of skeletons" href="skan.nx.html"/>
        <link rel="prev" title="skan.pre: Image preprocessing" href="skan.pre.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Skan
          

          
          </a>

          
            
            
              <div class="version">
                0.8.0-dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installing Skan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting started: Skeleton analysis with Skan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gui.html">Using Skan’s GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../complete_analysis.html">Complete analysis with Skan</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api.html">Skan API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="skan.csr.html">skan.csr: CSR Graph representation of skeletons</a></li>
<li class="toctree-l2"><a class="reference internal" href="skan.draw.html">skan.draw: Skeleton visualisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="skan.pipe.html">skan.pipe:: Pipeline functions for skeleton analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="skan.pre.html">skan.pre: Image preprocessing</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">skan.vendored.thresholding: Thresholding algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="skan.nx.html">skan.nx: NetworkX respresentation of skeletons</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Skan</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="api.html">Skan API Reference</a> &raquo;</li>
        
      <li>skan.vendored.thresholding: Thresholding algorithms</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/skan.vendored.thresholding.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="skan-vendored-thresholding-thresholding-algorithms">
<h1>skan.vendored.thresholding: Thresholding algorithms<a class="headerlink" href="#skan-vendored-thresholding-thresholding-algorithms" title="Permalink to this headline">¶</a></h1>
<p>This version of Sauvola thresholding is extremely fast even for large window
sizes.</p>
<span class="target" id="module-skan.vendored.thresholding"></span><dl class="function">
<dt id="skan.vendored.thresholding.correlate_sparse">
<code class="descclassname">skan.vendored.thresholding.</code><code class="descname">correlate_sparse</code><span class="sig-paren">(</span><em>image</em>, <em>kernel</em>, <em>mode='reflect'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/skan/vendored/thresholding.html#correlate_sparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#skan.vendored.thresholding.correlate_sparse" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute valid cross-correlation of <cite>padded_array</cite> and <cite>kernel</cite>.</p>
<p>This function is <em>fast</em> when <cite>kernel</cite> is large with many zeros.</p>
<p>See <code class="docutils literal notranslate"><span class="pre">scipy.ndimage.correlate</span></code> for a description of cross-correlation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>image</strong> : array of float, shape (M, N,[ …,] P)</p>
<blockquote>
<div><p>The input array. It should be already padded, as a margin of the
same shape as kernel (-1) will be stripped off.</p>
</div></blockquote>
<p><strong>kernel</strong> : array of float, shape (Q, R,[ …,] S)</p>
<blockquote>
<div><p>The kernel to be correlated. Must have the same number of
dimensions as <cite>padded_array</cite>. For high performance, it should
be sparse (few nonzero entries).</p>
</div></blockquote>
<p><strong>mode</strong> : string, optional</p>
<blockquote>
<div><p>See <cite>np.pad</cite> for valid modes. Additionally, mode ‘valid’ is
accepted, in which case no padding is applied and the result is
the result for the smaller image for which the kernel is entirely
inside the original data.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>result</strong> : array of float, shape (M, N,[ …,] P)</p>
<blockquote class="last">
<div><p>The result of cross-correlating <cite>image</cite> with <cite>kernel</cite>. If mode
‘valid’ is used, the resulting shape is (M-Q+1, N-R+1,[ …,] P-S+1).</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="skan.vendored.thresholding.threshold_niblack">
<code class="descclassname">skan.vendored.thresholding.</code><code class="descname">threshold_niblack</code><span class="sig-paren">(</span><em>image</em>, <em>window_size=15</em>, <em>k=0.2</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/skan/vendored/thresholding.html#threshold_niblack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#skan.vendored.thresholding.threshold_niblack" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies Niblack local threshold to an array.</p>
<p>A threshold T is calculated for every pixel in the image using the
following formula:</p>
<p>T = m(x,y) - k * s(x,y)</p>
<p>where m(x,y) and s(x,y) are the mean and standard deviation of
pixel (x,y) neighborhood defined by a rectangular window with size w
times w centered around the pixel. k is a configurable parameter
that weights the effect of standard deviation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>image: (N, M) ndarray</strong></p>
<blockquote>
<div><p>Grayscale input image.</p>
</div></blockquote>
<p><strong>window_size</strong> : int, optional</p>
<blockquote>
<div><p>Odd size of pixel neighborhood window (e.g. 3, 5, 7…).</p>
</div></blockquote>
<p><strong>k</strong> : float, optional</p>
<blockquote>
<div><p>Value of parameter k in threshold formula.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>threshold</strong> : (N, M) ndarray</p>
<blockquote class="last">
<div><p>Threshold mask. All pixels with an intensity higher than
this value are assumed to be foreground.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>This algorithm is originally designed for text recognition.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[R3]</a></td><td>Niblack, W (1986), An introduction to Digital Image
Processing, Prentice-Hall.</td></tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skimage</span> <span class="k">import</span> <span class="n">data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">page</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">binary_image</span> <span class="o">=</span> <span class="n">threshold_niblack</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">window_size</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="skan.vendored.thresholding.threshold_sauvola">
<code class="descclassname">skan.vendored.thresholding.</code><code class="descname">threshold_sauvola</code><span class="sig-paren">(</span><em>image</em>, <em>window_size=15</em>, <em>k=0.2</em>, <em>r=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/skan/vendored/thresholding.html#threshold_sauvola"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#skan.vendored.thresholding.threshold_sauvola" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies Sauvola local threshold to an array. Sauvola is a
modification of Niblack technique.</p>
<p>In the original method a threshold T is calculated for every pixel
in the image using the following formula:</p>
<p>T = m(x,y) * (1 + k * ((s(x,y) / R) - 1))</p>
<p>where m(x,y) and s(x,y) are the mean and standard deviation of
pixel (x,y) neighborhood defined by a rectangular window with size w
times w centered around the pixel. k is a configurable parameter
that weights the effect of standard deviation.
R is the maximum standard deviation of a greyscale image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>image: (N, M) ndarray</strong></p>
<blockquote>
<div><p>Grayscale input image.</p>
</div></blockquote>
<p><strong>window_size</strong> : int, optional</p>
<blockquote>
<div><p>Odd size of pixel neighborhood window (e.g. 3, 5, 7…).</p>
</div></blockquote>
<p><strong>k</strong> : float, optional</p>
<blockquote>
<div><p>Value of the positive parameter k.</p>
</div></blockquote>
<p><strong>r</strong> : float, optional</p>
<blockquote>
<div><p>Value of R, the dynamic range of standard deviation.
If None, set to the half of the image dtype range.</p>
</div></blockquote>
<p><strong>offset</strong> : float, optional</p>
<blockquote>
<div><p>Constant subtracted from obtained local thresholds.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>threshold</strong> : (N, M) ndarray</p>
<blockquote class="last">
<div><p>Threshold mask. All pixels with an intensity higher than
this value are assumed to be foreground.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>This algorithm is originally designed for text recognition.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[R4]</a></td><td>J. Sauvola and M. Pietikainen, “Adaptive document image
binarization,” Pattern Recognition 33(2),
pp. 225-236, 2000.
DOI:10.1016/S0031-3203(99)00055-2</td></tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skimage</span> <span class="k">import</span> <span class="n">data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">page</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">binary_sauvola</span> <span class="o">=</span> <span class="n">threshold_sauvola</span><span class="p">(</span><span class="n">image</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">window_size</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="skan.nx.html" class="btn btn-neutral float-right" title="skan.nx: NetworkX respresentation of skeletons" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="skan.pre.html" class="btn btn-neutral" title="skan.pre: Image preprocessing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Juan Nunez-Iglesias.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.8.0-dev',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>